

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SimPy’s Object Oriented API &mdash; Simulador de Rede  v0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Simulador de Rede  v0.1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Simulador de Rede  v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="simpy-s-object-oriented-api">
<h1><a class="toc-backref" href="#id1">SimPy&#8217;s Object Oriented API</a><a class="headerlink" href="#simpy-s-object-oriented-api" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body"><ul class="first simple">
<li>Klaus Muller &lt;<a class="reference external" href="mailto:Muller&#37;&#52;&#48;users&#46;sourceforge&#46;net">Muller<span>&#64;</span>users<span>&#46;</span>sourceforge<span>&#46;</span>net</a>&gt;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">SimPy release:</th><td class="field-body"><p class="first">v0.1</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Python version:</th><td class="field-body"><p class="first">2.6 and later</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body"><p class="first last">June 27, 2012</p>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#simpy-s-object-oriented-api" id="id1">SimPy&#8217;s Object Oriented API</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#basic-simpy-oo-api-design" id="id3">Basic SimPy OO API Design</a></li>
<li><a class="reference internal" href="#api-changes" id="id4">API changes</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document describes the object oriented (OO) programming
interface introduced with SimPy 2.0. This
is an add-on to the existing API, an alternative API. There is full backward compatibility:</p>
<div class="section" id="motivation">
<h3>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h3>
<p>Many simulation languages support a procedural modelling style. Using them,
problems are decomposed into procedures (functions, subroutines) and either
represented by general components, such as queues, or represented in code
with data structures.</p>
<p>There are fundamental problems with using the procedural style of
modelling and simulation. Procedures do not correspond to real world
components. Instead, they correspond to methods and algorithms.
Mapping from the real (problem) world to the model and back is difficult
and not obvious, particularly for users expert in the problem domain, but
not in computer science. Perhaps the greatest limitation of the procedural
style is the lack of model extensibility. The only way in this style
to change simulation models is through functional extension. One can
add structural functionality but not alter any of its basic processes.</p>
<p>Right from its beginning, SimPy, on the other hand, has supported an
<strong>object oriented approach</strong> to simulation modelling.
In SimPy, models can be implemented as collections of autonomous,
cooperating objects.
These objects are self-sufficient and independent. The actions on these
objects are tied to the objects and their attributes. The object-oriented
capabilities of Python strongly support this encapsulation.</p>
<p>Why does this matter for simulation models? It helps with the mapping from
real-world objects and their activities to modelled objects and activities,
and back. This not only reduces the complexity of the models, it also
makes for easier validation of models and interpretation of simulation
results in real world terms.</p>
<p>The new API allows different, often more concise, cleaner program patterns.
It strongly supports the development of libraries
of model components for specific real world domains. It also supports
the re-use and extension of models when model specifications change.
In particular larger SimPy programs written with the advanced OO API should be
easier to maintain and extend. Users are advised to familiarize themselves
with this programming paradigm by reading the models in the
<cite>SimPyModels</cite> folder. Most of them are provided in two implementations, i.e. in the
existing and in the OO API. Similarly, the programs in the Bank tutorials
are provided with both APIs.</p>
<p>The advanced OO API has been developed very elegantly by Stefan Scherfke and
Ontje Lünsdorf, starting from SimPy 1.9. Thanks, guys, for this great job!</p>
<p>Readers of this document should be familiar with the basics of SimPy and
have read at least &#8220;Basic SimPy - Manual For First Time Users&#8221;. They should
also know how subclassing is done in Python.</p>
</div>
</div>
<div class="section" id="basic-simpy-oo-api-design">
<h2><a class="toc-backref" href="#id3">Basic SimPy OO API Design</a><a class="headerlink" href="#basic-simpy-oo-api-design" title="Permalink to this headline">¶</a></h2>
<p>A class <tt class="docutils literal"><span class="pre">Simulation</span></tt> has been added to module <tt class="docutils literal"><span class="pre">SimPy.Simulation</span></tt>.
<tt class="docutils literal"><span class="pre">SimulationTrace</span></tt>, <tt class="docutils literal"><span class="pre">SimulationStep</span></tt> and  <tt class="docutils literal"><span class="pre">SimulationRT</span></tt> are subclasses of
<tt class="docutils literal"><span class="pre">Simulation</span></tt>. Multiple instances of these classes can co-exist in a SimPy program.</p>
<div class="section" id="backward-compatibility">
<h3>Backward compatibility<a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h3>
<p>Since SimPy 2.0, the package offers both the existing procedural API and an
object-oriented API
where simulation capabilities are provided by instantiating <tt class="docutils literal"><span class="pre">Simulation</span></tt>.
<tt class="docutils literal"><span class="pre">SimulationTrace</span></tt>, <tt class="docutils literal"><span class="pre">SimulationStep</span></tt> or  <tt class="docutils literal"><span class="pre">SimulationRT</span></tt> are subclasses of
<tt class="docutils literal"><span class="pre">Simulation</span></tt>.</p>
<p>Each <tt class="docutils literal"><span class="pre">SimulationXX</span></tt> instance has its own event list and therefore its own simulation time.
A <tt class="docutils literal"><span class="pre">SimulationXX</span></tt> instance can effectively be considered as a simulated, isolated parallel
world. Any <em>Process</em>, <em>Resource</em>, <em>Store</em>, <em>Level</em>, <em>Monitor</em>, <em>Tally</em> or <em>SimEvent</em>
instance belongs to one and only one world (i.e., <tt class="docutils literal"><span class="pre">Simulationxx</span></tt> instance).</p>
<p>The following program shows what this means for API and program structure:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Object Oriented SimPy API&quot;&quot;&quot;</span>

<span class="c">## Model components -------------------------------</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">print</span> <span class="s">&quot;Time: </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="c">## Model and Experiment ---------------------------</span>

<span class="n">s</span><span class="o">=</span><span class="n">Simulation</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Using the existing API, the following program is semantically the same and also works
under the OO version:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Traditional SimPy API&quot;&quot;&quot;</span>

<span class="c">## Model components -------------------------------</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">res</span>
        <span class="k">print</span> <span class="s">&quot;Time: </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">now</span><span class="p">()</span>

<span class="c">## Model and Experiment ---------------------------</span>

<span class="n">initialize</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">()</span>
<span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
<span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This full (backwards) compatibility is achieved by the automatic generation
of a <em>SimulationXX</em> instance &#8220;behind the scenes&#8221;.</p>
</div>
<div class="section" id="models-as-simulationxx-subclasses">
<h3>Models as SimulationXX subclasses<a class="headerlink" href="#models-as-simulationxx-subclasses" title="Permalink to this headline">¶</a></h3>
<p>The advanced OO API can be used to generate model classes which are SimulationXX subclasses.
This ties a model and a SimulationXX instance together beautifully. See the following
example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">## CarModel.py</span>
<span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;Advanced Object Oriented SimPy API&quot;&quot;&quot;</span>

<span class="c">## Model components -------------------------------</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">park</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">parking</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">10</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">parking</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> done at </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c">## Model ------------------------------------------</span>

<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">Simulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="p">,</span><span class="n">spaces</span><span class="p">):</span>
        <span class="n">Simulation</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span> <span class="o">=</span> <span class="n">nrCars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spaces</span> <span class="o">=</span> <span class="n">spaces</span>
    <span class="k">def</span> <span class="nf">runModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">## Initialize Simulation instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parking</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Parking lot&quot;</span><span class="p">,</span><span class="n">unitName</span><span class="o">=</span><span class="s">&quot;spaces&quot;</span><span class="p">,</span>
                                <span class="n">capacity</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">spaces</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span><span class="p">):</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Car</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span> <span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span> <span class="n">auto</span><span class="o">.</span><span class="n">park</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c">## Experiment ----------------------------------</span>

    <span class="n">myModel</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Experiment 1&quot;</span><span class="p">,</span> <span class="n">nrCars</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">spaces</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">myModel</span><span class="o">.</span><span class="n">runModel</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">myModel</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>class <tt class="docutils literal"><span class="pre">Model</span></tt> here is a subclass of <tt class="docutils literal"><span class="pre">Simulation</span></tt>. Every model execution, i.e. call to
<tt class="docutils literal"><span class="pre">runModel</span></tt>, reinitializes the simulation (creates an empty event list and sets
the time to 0) (see line 24). <tt class="docutils literal"><span class="pre">runModel</span></tt> can thus be called repeatedly for multiple runs of
the same experiment setup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c">## Experiments ---------------------------------</span>

    <span class="n">myModel</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Experiment 1&quot;</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">spaces</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">repetition</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>

    <span class="c">## One Experiment -------------------------------</span>

        <span class="n">myModel</span><span class="o">.</span><span class="n">runModel</span><span class="p">()</span>
        <span class="k">print</span> <span class="n">myModel</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="model-extension-by-subclassing">
<h3>Model extension by subclassing<a class="headerlink" href="#model-extension-by-subclassing" title="Permalink to this headline">¶</a></h3>
<p>With the advanced OO API, it is now very easy and clean to extend a model by subclassing. This
effectively allows the creation of model libraries.</p>
<p>For example, the model in the previous example can be extended to one in which also vans
compete for parking spaces. This is done by importing the <tt class="docutils literal"><span class="pre">CarModel</span></tt> module
and subclassing <tt class="docutils literal"><span class="pre">Model</span></tt> as follows:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">## CarModelExtension.py</span>

<span class="c">## Model components -------------------------------</span>

<span class="kn">from</span> <span class="nn">CarModel</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">Van</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">park</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">request</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">parking</span>
        <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">5</span>
        <span class="k">yield</span> <span class="n">release</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">parking</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> done at </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c">## Model ------------------------------------------</span>

<span class="k">class</span> <span class="nc">ModelExtension</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="p">,</span><span class="n">capacity</span><span class="p">,</span><span class="n">spaces</span><span class="p">,</span><span class="n">nrTrucks</span><span class="p">):</span>
        <span class="n">Model</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="n">nrCars</span><span class="p">,</span><span class="n">spaces</span><span class="o">=</span><span class="n">spaces</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrTrucks</span> <span class="o">=</span> <span class="n">nrTrucks</span>

    <span class="k">def</span> <span class="nf">runModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">capacity</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resCapacity</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrCars</span><span class="p">):</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Car</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">auto</span><span class="p">,</span><span class="n">auto</span><span class="o">.</span><span class="n">park</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrTrucks</span><span class="p">):</span>
            <span class="n">truck</span> <span class="o">=</span> <span class="n">Van</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Van</span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">truck</span><span class="p">,</span><span class="n">truck</span><span class="o">.</span><span class="n">park</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c">## Experiment ----------------------------------</span>

<span class="n">myModel1</span> <span class="o">=</span> <span class="n">ModelExtension</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Experiment 2&quot;</span><span class="p">,</span><span class="n">nrCars</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">spaces</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">nrTrucks</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">myModel1</span><span class="o">.</span><span class="n">runModel</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Let&#8217;s walk through this:</p>
<dl class="docutils">
<dt><em>Line 5</em>:</dt>
<dd>This import makes available all the objects of SimPy.Simulation and the ones defined by
the <tt class="docutils literal"><span class="pre">CarModel</span></tt> module (class <tt class="docutils literal"><span class="pre">Car</span></tt> and class <tt class="docutils literal"><span class="pre">Model</span></tt>).</dd>
<dt><em>Lines 7-12</em>:</dt>
<dd>Addition of a <tt class="docutils literal"><span class="pre">Van</span></tt> class with a <tt class="docutils literal"><span class="pre">park</span></tt> PEM.</dd>
<dt><em>Line 16</em>:</dt>
<dd>Definition of a subclass <tt class="docutils literal"><span class="pre">ModelExtension</span></tt> which extends class <tt class="docutils literal"><span class="pre">Model</span></tt>.</dd>
<dt><em>Lines 17-18</em>:</dt>
<dd>Initialization of the model class (<tt class="docutils literal"><span class="pre">Model</span></tt>) from which <tt class="docutils literal"><span class="pre">ModelExtension</span></tt>
is derived. When subclassing a class in Python, this is always necessary:
Python does <strong>not</strong> automatically initialize the super-class.</dd>
<dt><em>Lines 21-30</em>:</dt>
<dd>Defines a <tt class="docutils literal"><span class="pre">runModel</span></tt> method for <tt class="docutils literal"><span class="pre">ModelExtension</span></tt> which also generates
and activates <tt class="docutils literal"><span class="pre">Van</span></tt> objects.</dd>
</dl>
</div>
</div>
<div class="section" id="api-changes">
<h2><a class="toc-backref" href="#id4">API changes</a><a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-simpy-simulation">
<h3>Module <tt class="docutils literal"><span class="pre">SimPy.Simulation</span></tt><a class="headerlink" href="#module-simpy-simulation" title="Permalink to this headline">¶</a></h3>
<p>The only change to the API of module <tt class="docutils literal"><span class="pre">SimPy.Simulation</span></tt>
is the addition of class <tt class="docutils literal"><span class="pre">Simulation</span></tt>:</p>
<div class="highlight-python"><pre>Module SimPy.Simulation:
   ################ Unchanged ################
   ## yield-verb constants --------------------
   get
   hold
   passivate
   put
   queueevent
   release
   request
   waitevent
   waituntil
   ## version constant ------------------------
   version
   ## classes ---------------------------------
   FatalSimerror
   Simerror
   ################ Added ################
   Simulation</pre>
</div>
<p>Thus, after the import:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>class <tt class="docutils literal"><span class="pre">Simulation</span></tt> is available to a program.</p>
<p>Actually,:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="n">Simulation</span>
</pre></div>
</div>
<p>is sufficient and even clearer.</p>
<div class="section" id="class-simulation">
<h4>class <tt class="docutils literal"><span class="pre">Simulation</span></tt><a class="headerlink" href="#class-simulation" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities of a model are provided by instantiating class
<tt class="docutils literal"><span class="pre">Simulation</span></tt> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">aSimulation</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="c">## model code follows</span>
</pre></div>
</div>
<p>Better OO programming style is actually to define a model class which inherits
from <tt class="docutils literal"><span class="pre">Simulation</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.Simulation</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Simulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="c">## model code follows</span>

<span class="n">myMo</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">()</span>
<span class="n">myMo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">self.initialize()</span></tt> is not really necessary, as the <tt class="docutils literal"><span class="pre">Simulation</span></tt> instance is
initialized at generation time. If method <tt class="docutils literal"><span class="pre">run</span></tt> for a model (here <tt class="docutils literal"><span class="pre">myMo</span></tt> ) is
executed more than once, e.g. for running a simulation repeatedly, <tt class="docutils literal"><span class="pre">self.initialize()</span></tt>
resets the model to an empty event list and simulation time 0.</p>
</div>
<div class="section" id="methods-of-class-simulation">
<h4>Methods of class Simulation<a class="headerlink" href="#methods-of-class-simulation" title="Permalink to this headline">¶</a></h4>
<p>class <tt class="docutils literal"><span class="pre">Simulation</span></tt> has these methods:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Simulation</span><span class="p">:</span>
  <span class="c">## Methods ----------------------------------</span>
  <span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">now</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">stopSimulation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">allEventNotices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">allEventTimes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  <span class="n">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">process</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
  <span class="n">reactivate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
  <span class="n">startCollection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">monitors</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tallies</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
  <span class="n">simulate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The semantics and parameters (except for <tt class="docutils literal"><span class="pre">self</span></tt>) of the methods are identical to those of the non-OO
<tt class="docutils literal"><span class="pre">SimPy.Simulation</span></tt> functions of the same name. For example, to get the current
simulation time of a Simulation object <tt class="docutils literal"><span class="pre">so</span></tt>, the call is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tcurrent</span> <span class="o">=</span> <span class="n">so</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-simpy-simulationtrace">
<h3>Module <tt class="docutils literal"><span class="pre">SimPy.SimulationTrace</span></tt><a class="headerlink" href="#module-simpy-simulationtrace" title="Permalink to this headline">¶</a></h3>
<p>The only change to the API of module <tt class="docutils literal"><span class="pre">SimPy.SimulationTrace</span></tt>
is the addition of class <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt>:</p>
<div class="highlight-python"><pre>Module SimPy.SimulationTrace:
  ################ Unchanged ################
  ## yield-verb constants --------------------
  get
  hold
  passivate
  put
  queueevent
  release
  request
  waitevent
  waituntil
  ## version constant ------------------------
  version
  ## classes ---------------------------------
  FatalSimerror
  Simerror
  Trace
  ################ Added ################
  SimulationTrace</pre>
</div>
<div class="section" id="class-simulationtrace">
<h4>class <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt><a class="headerlink" href="#class-simulationtrace" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities of a model with tracing are provided by instantiating class
<tt class="docutils literal"><span class="pre">SimulationTrace</span></tt> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationTrace</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">aSimulation</span> <span class="o">=</span> <span class="n">SimulationTrace</span><span class="p">()</span>
<span class="c">## model code follows</span>
</pre></div>
</div>
<p>Again, better OO programming style is actually to define a model class which inherits
from Simulation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationTrace</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">SimulationTrace</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="c"># model code follows</span>

<span class="n">myMo</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">()</span>
<span class="n">myMo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>class <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt> is a subclass of <tt class="docutils literal"><span class="pre">Simulation</span></tt> and thus
provides the same methods, albeit with tracing added.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<tt class="docutils literal"><span class="pre">SimPy.SimulationTrace</span></tt> functions of the same name.</p>
</div>
<div class="section" id="methods-and-attributes-of-class-simulationtrace">
<h4>Methods and attributes of class SimulationTrace<a class="headerlink" href="#methods-and-attributes-of-class-simulationtrace" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SimulationTrace</span><span class="p">:</span>
   <span class="c">## Methods ----------------------------------</span>
   <span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">now</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">stopSimulation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">allEventNotices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">allEventTimes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
   <span class="n">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">process</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
   <span class="n">reactivate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s">&#39;undefined&#39;</span><span class="p">,</span> <span class="n">prior</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
   <span class="n">startCollection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">monitors</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tallies</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
   <span class="n">simulate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
   <span class="c">## trace attribute ---------------------------</span>
   <span class="n">trace</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="attribute-trace">
<h5>Attribute <tt class="docutils literal"><span class="pre">trace</span></tt><a class="headerlink" href="#attribute-trace" title="Permalink to this headline">¶</a></h5>
<p>An initialization of class <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt> generates an instance of
class <tt class="docutils literal"><span class="pre">Trace</span></tt>. This becomes an attribute <tt class="docutils literal"><span class="pre">trace</span></tt> of the <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt>
instance.</p>
</div>
<div class="section" id="trace-methods">
<h5><tt class="docutils literal"><span class="pre">Trace</span></tt> methods<a class="headerlink" href="#trace-methods" title="Permalink to this headline">¶</a></h5>
<p>The semantics and parameters of the <tt class="docutils literal"><span class="pre">Trace</span></tt> methods are identical to those of
the non-OO <tt class="docutils literal"><span class="pre">SimPy.SimulationTrace</span></tt> <tt class="docutils literal"><span class="pre">trace</span></tt> instance of the same name.</p>
<ul class="simple">
<li>trace.start(self)</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>trace.stop(self)</li>
<li>trace.treset(self)</li>
<li>trace.tchange(self, **kmvar)</li>
<li>trace.ttext(self,par)</li>
</ul>
<p>Example calls (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationTrace</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">SimulationTrace</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">ttext</span><span class="p">(</span><span class="s">&quot;Here we go&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Again, note that you have to qualify the <tt class="docutils literal"><span class="pre">trace</span></tt> instance (see e.g. the last line
of the snippet) with the <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt> instance, here <tt class="docutils literal"><span class="pre">s</span></tt>.</p>
</div>
</div>
</div>
<div class="section" id="module-simpy-simulationrt">
<h3>Module <tt class="docutils literal"><span class="pre">SimPy.SimulationRT</span></tt><a class="headerlink" href="#module-simpy-simulationrt" title="Permalink to this headline">¶</a></h3>
<div class="section" id="class-simulationrt">
<h4>class <tt class="docutils literal"><span class="pre">SimulationRT</span></tt><a class="headerlink" href="#class-simulationrt" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities plus real time  synchronization are provided by instantiating
class <tt class="docutils literal"><span class="pre">SimulationRT</span></tt>.</p>
<div class="section" id="methods-of-class-simulationrt">
<h5>Methods of class <tt class="docutils literal"><span class="pre">SimulationRT</span></tt><a class="headerlink" href="#methods-of-class-simulationrt" title="Permalink to this headline">¶</a></h5>
<p>The <tt class="docutils literal"><span class="pre">SimulationRT</span></tt> subclass adds two methods to those inherited
from <tt class="docutils literal"><span class="pre">Simulation</span></tt>.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<tt class="docutils literal"><span class="pre">SimPy.SimulationRT</span></tt> functions of the same name.</p>
<ul class="simple">
<li>rtnow</li>
<li>rtset</li>
</ul>
<p>Example calls (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationRT</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">Process</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="p">)</span>
   <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">rtnow</span><span class="p">()</span>
      <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-simulationstep">
<h4>class <tt class="docutils literal"><span class="pre">SimulationStep</span></tt><a class="headerlink" href="#class-simulationstep" title="Permalink to this headline">¶</a></h4>
<p>The simulation capabilities plus event stepping are provided by instantiating
class <tt class="docutils literal"><span class="pre">SimulationStep</span></tt>.</p>
<div class="section" id="methods-of-class-simulationstep">
<h5>Methods of class <tt class="docutils literal"><span class="pre">SimulationStep</span></tt><a class="headerlink" href="#methods-of-class-simulationstep" title="Permalink to this headline">¶</a></h5>
<p>The <tt class="docutils literal"><span class="pre">SimulationStep</span></tt> subclass adds three methods to those inherited
from <tt class="docutils literal"><span class="pre">Simulation</span></tt>.</p>
<p>The semantics and parameters of the methods are identical to those of the non-OO
<tt class="docutils literal"><span class="pre">SimPy.SimulationStep</span></tt> functions of the same name.</p>
<ul class="simple">
<li>startStepping</li>
<li>stopStepping</li>
<li>simulateStep</li>
</ul>
<p>Example call (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">SimPy.SimulationStep</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">SimulationStep</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">simulateStep</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">myCallBack</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="classes-with-a-simulationxx-attribute">
<h3>Classes with a <tt class="docutils literal"><span class="pre">SimulationXX</span></tt> attribute<a class="headerlink" href="#classes-with-a-simulationxx-attribute" title="Permalink to this headline">¶</a></h3>
<p>All SimPy entity (<em>Process</em>, <em>Resource</em>, <em>Store</em>, <em>Level</em>, <em>SimEvent</em>)
and monitoring (<em>Monitor</em>, <em>Tally</em>) classes have time-related functions.
In the OO-API of SimPy, they therefore have a <tt class="docutils literal"><span class="pre">.sim</span></tt> attribute which is a
reference to the <em>SimulationXX</em> instance to which they belong. This association
is made by providing that reference as a parameter to the constructor of the class.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><strong>All class instances instances must refer to the same SimulationXX instance,
i.e., their .sim attributes must have the same value. That value must be the
reference to the SimulationXX instance.</strong> Any deviation from this will
lead to strange mis-functioning of a SimPy script.</p>
</div>
<p>The constructor calls (signatures) for the classes in question thus change as follows:</p>
<div class="section" id="class-process">
<h4>class <tt class="docutils literal"><span class="pre">Process</span></tt><a class="headerlink" href="#class-process" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Process</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_process&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 1 (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="k">yield</span> <span class="n">hold</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="mi">10</span>
       <span class="k">print</span> <span class="s">&quot;Arrived at&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">c</span><span class="o">=</span><span class="n">Car</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Mine&quot;</span><span class="p">,</span> <span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 2, with an <tt class="docutils literal"><span class="pre">__init__</span></tt> method (snippet):</p>
<blockquote>
<div><dl class="docutils">
<dt>class Car(Process):</dt>
<dd><dl class="first last docutils">
<dt>def __init__(self,name):</dt>
<dd>Process.__init__(self,name=name, sim=self.sim)</dd>
</dl>
</dd>
</dl>
<p>aSim = Simulation()
aSim.initialize()
c=Car(name=&#8221;Mine&#8221;, whichSim=aSim)</p>
</div></blockquote>
</div>
<div class="section" id="class-resource">
<h4>class <tt class="docutils literal"><span class="pre">Resource</span></tt><a class="headerlink" href="#class-resource" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Resource</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_resource&#39;</span><span class="p">,</span> <span class="n">unitName</span> <span class="o">=</span> <span class="s">&#39;units&#39;</span><span class="p">,</span>
             <span class="n">qType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span> <span class="n">preemptable</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">monitored</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
             <span class="n">monitorType</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">res</span><span class="o">=</span><span class="n">Resource</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Server&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-store-and-level">
<h4>classes <tt class="docutils literal"><span class="pre">Store</span></tt> and <tt class="docutils literal"><span class="pre">Level</span></tt><a class="headerlink" href="#classes-store-and-level" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Store</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">=</span> <span class="s">&#39;unbounded&#39;</span><span class="p">,</span> <span class="n">unitName</span> <span class="o">=</span> <span class="s">&#39;units&#39;</span><span class="p">,</span>
            <span class="n">putQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span> <span class="n">getQType</span> <span class="o">=</span> <span class="n">FIFO</span><span class="p">,</span>
            <span class="n">monitored</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">monitorType</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">,</span> <span class="n">initialBuffered</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>::</dt>
<dd><dl class="first last docutils">
<dt>Level.__init__(self, name = None, capacity = &#8216;unbounded&#8217;, unitName = &#8216;units&#8217;,</dt>
<dd>putQType = FIFO, getQType = FIFO,
monitored = False, monitorType = Monitor, initialBuffered = None,
sim = None)</dd>
</dl>
</dd>
</dl>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="nb">buffer</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Parts&quot;</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="class-simevent">
<h4>class <tt class="docutils literal"><span class="pre">SimEvent</span></tt><a class="headerlink" href="#class-simevent" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SimEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_SimEvent&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">SimEvent</span><span class="p">(</span><span class="s">&quot;Boing!&quot;</span><span class="p">,</span> <span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-monitor-and-tally">
<h4>classes <tt class="docutils literal"><span class="pre">Monitor</span></tt> and <tt class="docutils literal"><span class="pre">Tally</span></tt><a class="headerlink" href="#classes-monitor-and-tally" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Monitor</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a_Monitor&#39;</span><span class="p">,</span> <span class="n">ylab</span> <span class="o">=</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">tlab</span> <span class="o">=</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="n">sim</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>::</dt>
<dd>Tally.__init__(self, name = &#8216;a_Tally&#8217;, ylab = &#8216;y&#8217;, tlab = &#8216;t&#8217;, sim = None)</dd>
</dl>
<p>Example (snippet):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aSim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">()</span>
<span class="n">aSim</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="n">myMoni</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Counting cars&quot;</span><span class="p">,</span> <span class="n">sim</span><span class="o">=</span><span class="n">aSim</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SimPy&#8217;s Object Oriented API</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-simpy-oo-api-design">Basic SimPy OO API Design</a><ul>
<li><a class="reference internal" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference internal" href="#models-as-simulationxx-subclasses">Models as SimulationXX subclasses</a></li>
<li><a class="reference internal" href="#model-extension-by-subclassing">Model extension by subclassing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-changes">API changes</a><ul>
<li><a class="reference internal" href="#module-simpy-simulation">Module <tt class="docutils literal"><span class="pre">SimPy.Simulation</span></tt></a><ul>
<li><a class="reference internal" href="#class-simulation">class <tt class="docutils literal"><span class="pre">Simulation</span></tt></a></li>
<li><a class="reference internal" href="#methods-of-class-simulation">Methods of class Simulation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simpy-simulationtrace">Module <tt class="docutils literal"><span class="pre">SimPy.SimulationTrace</span></tt></a><ul>
<li><a class="reference internal" href="#class-simulationtrace">class <tt class="docutils literal"><span class="pre">SimulationTrace</span></tt></a></li>
<li><a class="reference internal" href="#methods-and-attributes-of-class-simulationtrace">Methods and attributes of class SimulationTrace</a><ul>
<li><a class="reference internal" href="#attribute-trace">Attribute <tt class="docutils literal"><span class="pre">trace</span></tt></a></li>
<li><a class="reference internal" href="#trace-methods"><tt class="docutils literal"><span class="pre">Trace</span></tt> methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-simpy-simulationrt">Module <tt class="docutils literal"><span class="pre">SimPy.SimulationRT</span></tt></a><ul>
<li><a class="reference internal" href="#class-simulationrt">class <tt class="docutils literal"><span class="pre">SimulationRT</span></tt></a><ul>
<li><a class="reference internal" href="#methods-of-class-simulationrt">Methods of class <tt class="docutils literal"><span class="pre">SimulationRT</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-simulationstep">class <tt class="docutils literal"><span class="pre">SimulationStep</span></tt></a><ul>
<li><a class="reference internal" href="#methods-of-class-simulationstep">Methods of class <tt class="docutils literal"><span class="pre">SimulationStep</span></tt></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#classes-with-a-simulationxx-attribute">Classes with a <tt class="docutils literal"><span class="pre">SimulationXX</span></tt> attribute</a><ul>
<li><a class="reference internal" href="#class-process">class <tt class="docutils literal"><span class="pre">Process</span></tt></a></li>
<li><a class="reference internal" href="#class-resource">class <tt class="docutils literal"><span class="pre">Resource</span></tt></a></li>
<li><a class="reference internal" href="#classes-store-and-level">classes <tt class="docutils literal"><span class="pre">Store</span></tt> and <tt class="docutils literal"><span class="pre">Level</span></tt></a></li>
<li><a class="reference internal" href="#class-simevent">class <tt class="docutils literal"><span class="pre">SimEvent</span></tt></a></li>
<li><a class="reference internal" href="#classes-monitor-and-tally">classes <tt class="docutils literal"><span class="pre">Monitor</span></tt> and <tt class="docutils literal"><span class="pre">Tally</span></tt></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/Manuals/SimPyOO_API.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Simulador de Rede  v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Danilo Soares, Fabio Santos, Gilson Freitas, Marcelo Coelho ,Nielson Santana ,Tiago Gondim, Siedberg, Raphael Ribeiro.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>